<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<style>
.r1 {font-style: italic}
.r2 {font-weight: bold}
.r3 {color: #7f7f7f; text-decoration-color: #7f7f7f; font-weight: bold}
.r4 {color: #000080; text-decoration-color: #000080; font-weight: bold}
.r5 {color: #000080; text-decoration-color: #000080; font-weight: bold; font-style: italic}
.r6 {color: #7f7f7f; text-decoration-color: #7f7f7f}
.r7 {color: #000080; text-decoration-color: #000080}
.r8 {color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold}
.r9 {color: #000000; text-decoration-color: #000000; background-color: #f8f8f8}
.r10 {color: #0000ff; text-decoration-color: #0000ff; background-color: #f8f8f8; font-weight: bold}
.r11 {background-color: #f8f8f8}
.r12 {color: #666666; text-decoration-color: #666666; background-color: #f8f8f8}
.r13 {color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8}
.r14 {color: #0000ff; text-decoration-color: #0000ff; background-color: #f8f8f8}
.r15 {color: #bb6622; text-decoration-color: #bb6622; background-color: #f8f8f8; font-weight: bold}
.r16 {color: #aa22ff; text-decoration-color: #aa22ff; background-color: #f8f8f8; font-weight: bold}
.r17 {color: #008000; text-decoration-color: #008000; background-color: #f8f8f8}
.r18 {color: #d2413a; text-decoration-color: #d2413a; background-color: #f8f8f8; font-weight: bold}
.r19 {color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8}
.r20 {font-weight: bold; font-style: italic}
.r21 {color: #0000ff; text-decoration-color: #0000ff}
body {
    color: #000000;
    background-color: #ffffff;
}
</style>
</head>
<html>
<body>
    <code>
        <pre style="font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span class="r1">                                          server.py: % of time = 100.00% out of  99.16s.                                           </span>
+---------------------------------------------------------------------------------------------------------------------------------+
|<span class="r2"> </span><span class="r3">Line</span><span class="r2">  </span>|<span class="r4">Time</span><span class="r2">    </span>|<span class="r4">––––––</span><span class="r2"> </span>|<span class="r4">––––––</span><span class="r2"> </span>|<span class="r2">                                                                                                </span>|
|       |<span class="r5">Python</span><span class="r2">  </span>|<span class="r5">native</span><span class="r2"> </span>|<span class="r5">system</span><span class="r2"> </span>|<span class="r2">server.py                                                                                       </span>|
|-------+--------+-------+-------+------------------------------------------------------------------------------------------------|
|<span class="r6">     1 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">import</span><span class="r9"> </span><span class="r10">socket</span><span class="r11">                                                                                  </span> |
|<span class="r6">     2 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">import</span><span class="r9"> </span><span class="r10">threading</span><span class="r11">                                                                               </span> |
|<span class="r6">     3 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">import</span><span class="r9"> </span><span class="r10">re</span><span class="r11">                                                                                      </span> |
|<span class="r6">     4 </span>|<span class="r7">    2%  </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r8">import</span><span class="r9"> </span><span class="r10">asyncio</span><span class="r11">                                                                                 </span> |
|<span class="r6">     5 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">http_status</span><span class="r12">=</span><span class="r9">{</span><span class="r11">                                                                                  </span> |
|<span class="r6">     6 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r13">&#x27;200&#x27;</span><span class="r9">: </span><span class="r13">&#x27;HTTP/1.1 200 OK&#x27;</span><span class="r9">,</span><span class="r11">                                                                  </span> |
|<span class="r6">     7 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r13">&#x27;400&#x27;</span><span class="r9">: </span><span class="r13">&#x27;HTTP/1.1 400 Bad Request&#x27;</span><span class="r9">,</span><span class="r11">                                                         </span> |
|<span class="r6">     8 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r13">&#x27;404&#x27;</span><span class="r9">: </span><span class="r13">&#x27;HTTP/1.1 404 Not Found&#x27;</span><span class="r9">,</span><span class="r11">                                                           </span> |
|<span class="r6">     9 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r13">&#x27;501&#x27;</span><span class="r9">: </span><span class="r13">&#x27;HTTP/1.1 501 Not Implemented&#x27;</span><span class="r11">                                                      </span> |
|<span class="r6">    10 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">}</span><span class="r11">                                                                                              </span> |
|<span class="r6">    11 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">file_types</span><span class="r12">=</span><span class="r9">{</span><span class="r11">                                                                                   </span> |
|<span class="r6">    12 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r13">&#x27;html&#x27;</span><span class="r9">: </span><span class="r13">&#x27;Content-Type: text/html; charset=utf-8&#x27;</span><span class="r9">, </span><span class="r13">&#x27;jpg&#x27;</span><span class="r9">: </span><span class="r13">&#x27;Content-Type: image/jpeg&#x27;</span><span class="r9">,</span><span class="r13">&#x27;png&#x27;</span><span class="r9">: </span> |
|<span class="r6">    13 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">}</span><span class="r11">                                                                                              </span> |
|<span class="r6">    14 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">request_parser</span><span class="r9">(request):</span><span class="r11">                                                             </span> |
|<span class="r6">    15 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        buff</span><span class="r12">=</span><span class="r9">request</span><span class="r12">.</span><span class="r9">decode()</span><span class="r12">.</span><span class="r9">split(</span><span class="r13">&#x27;</span><span class="r15">\r\n</span><span class="r13">&#x27;</span><span class="r9">)</span><span class="r11">                                                    </span> |
|<span class="r6">    16 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        method, request, protocol </span><span class="r12">=</span><span class="r9"> buff[</span><span class="r12">0</span><span class="r9">]</span><span class="r12">.</span><span class="r9">split(</span><span class="r13">&#x27; &#x27;</span><span class="r9">)</span><span class="r11">                                         </span> |
|<span class="r6">    17 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">if</span><span class="r9"> request </span><span class="r12">==</span><span class="r9"> </span><span class="r13">&#x27;/&#x27;</span><span class="r9">: request </span><span class="r12">=</span><span class="r9"> </span><span class="r13">&#x27;/index.html&#x27;</span><span class="r11">                                             </span> |
|<span class="r6">    18 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        path </span><span class="r12">=</span><span class="r9"> re</span><span class="r12">.</span><span class="r9">findall(</span><span class="r13">&#x27;[/A-Za-z.]+&#x27;</span><span class="r9">, request)[</span><span class="r12">0</span><span class="r9">]</span><span class="r11">                                           </span> |
|<span class="r6">    19 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        file_type </span><span class="r12">=</span><span class="r9"> path</span><span class="r12">.</span><span class="r9">split(</span><span class="r13">&#x27;.&#x27;</span><span class="r9">)[</span><span class="r12">1</span><span class="r9">]</span><span class="r11">                                                         </span> |
|<span class="r6">    20 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">return</span><span class="r9"> method, path, file_type</span><span class="r11">                                                         </span> |
|<span class="r6">    21 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    22 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">give_header</span><span class="r9">(code,file_type):</span><span class="r11">                                                         </span> |
|<span class="r6">    23 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">return</span><span class="r9"> http_status[code]</span><span class="r12">.</span><span class="r9">encode() </span><span class="r12">+</span><span class="r13">&#x27;</span><span class="r15">\r\n</span><span class="r13">&#x27;</span><span class="r12">.</span><span class="r9">encode()\</span><span class="r11">                                    </span> |
|<span class="r6">    24 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">               </span><span class="r12">+</span><span class="r9"> file_types[file_type]</span><span class="r12">.</span><span class="r9">encode() </span><span class="r12">+</span><span class="r9"> </span><span class="r13">&#x27;</span><span class="r15">\r\n\r\n</span><span class="r13">&#x27;</span><span class="r12">.</span><span class="r9">encode()</span><span class="r11">                          </span> |
|<span class="r6">    25 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    26 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">check_port</span><span class="r9">(port):</span><span class="r11">                                                                    </span> |
|<span class="r6">    27 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        default_port</span><span class="r12">=16666</span><span class="r11">                                                                     </span> |
|<span class="r6">    28 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">if</span><span class="r9"> port</span><span class="r12">&gt;1024</span><span class="r9"> </span><span class="r16">and</span><span class="r9"> port</span><span class="r12">&lt;65000</span><span class="r9">:</span><span class="r11">                                                           </span> |
|<span class="r6">    29 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            </span><span class="r8">return</span><span class="r9"> port</span><span class="r11">                                                                        </span> |
|<span class="r6">    30 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">else</span><span class="r9">:</span><span class="r11">                                                                                  </span> |
|<span class="r6">    31 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            </span><span class="r8">return</span><span class="r9"> default_port</span><span class="r11">                                                                </span> |
|<span class="r6">    32 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    33 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">server_response</span><span class="r9">(request):</span><span class="r11">                                                            </span> |
|<span class="r6">    34 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            method, path, file_type </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> request_parser(request)</span><span class="r11">                            </span> |
|<span class="r6">    35 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            </span><span class="r8">if</span><span class="r9"> method</span><span class="r12">!=</span><span class="r13">&quot;GET&quot;</span><span class="r9"> </span><span class="r16">and</span><span class="r9"> method</span><span class="r12">!=</span><span class="r13">&quot;HEAD&quot;</span><span class="r9">:</span><span class="r11">                                               </span> |
|<span class="r6">    36 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                    res </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> error_501()</span><span class="r11">                                                    </span> |
|<span class="r6">    37 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                    </span><span class="r8">return</span><span class="r9"> res</span><span class="r11">                                                                 </span> |
|<span class="r6">    38 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            </span><span class="r8">else</span><span class="r9">:</span><span class="r11">                                                                              </span> |
|<span class="r6">    39 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                </span><span class="r8">try</span><span class="r9">:</span><span class="r11">                                                                           </span> |
|<span class="r6">    40 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                    </span><span class="r8">with</span><span class="r9"> </span><span class="r17">open</span><span class="r9">(</span><span class="r13">&#x27;views&#x27;</span><span class="r12">+</span><span class="r9">path,</span><span class="r13">&#x27;rb&#x27;</span><span class="r9">) </span><span class="r8">as</span><span class="r9"> file:</span><span class="r11">                                      </span> |
|<span class="r6">    41 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                        data</span><span class="r12">=</span><span class="r9">file</span><span class="r12">.</span><span class="r9">read()</span><span class="r11">                                                       </span> |
|<span class="r6">    42 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                        header</span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> give_header(</span><span class="r13">&#x27;200&#x27;</span><span class="r9">,file_type)</span><span class="r11">                             </span> |
|<span class="r6">    43 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                        </span><span class="r8">return</span><span class="r9">  header</span><span class="r12">+</span><span class="r9">data</span><span class="r11">                                                    </span> |
|<span class="r6">    44 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                </span><span class="r8">except</span><span class="r9"> </span><span class="r18">FileNotFoundError</span><span class="r9">:</span><span class="r11">                                                      </span> |
|<span class="r6">    45 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                        res </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> error_404()</span><span class="r11">                                                </span> |
|<span class="r6">    46 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">                        </span><span class="r8">return</span><span class="r9"> res</span><span class="r11">                                                             </span> |
|<span class="r6">    47 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    48 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">MentinanceReDirect</span><span class="r9">():</span><span class="r11">                                                                </span> |
|<span class="r6">    49 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    f</span><span class="r12">=</span><span class="r17">open</span><span class="r9">(</span><span class="r13">&#x27;views/mentenanta.html&#x27;</span><span class="r9">, </span><span class="r13">&#x27;rb&#x27;</span><span class="r9">)</span><span class="r11">                                                      </span> |
|<span class="r6">    50 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    data</span><span class="r12">=</span><span class="r9">f</span><span class="r12">.</span><span class="r9">read()</span><span class="r11">                                                                              </span> |
|<span class="r6">    51 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    response_header </span><span class="r12">=</span><span class="r9"> </span><span class="r13">&#x27;HTTP/1.1 200 OK</span><span class="r15">\r\n</span><span class="r13">Content-Type: text/html; charset=utf-8</span><span class="r15">\r\n\r\n</span><span class="r13">&#x27;</span><span class="r12">.</span><span class="r9">encod</span> |
|<span class="r6">    52 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    f</span><span class="r12">.</span><span class="r9">close()</span><span class="r11">                                                                                  </span> |
|<span class="r6">    53 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> response_header</span><span class="r12">+</span><span class="r9">data</span><span class="r11">                                                                </span> |
|<span class="r6">    54 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">error_404</span><span class="r9">():</span><span class="r11">                                                                         </span> |
|<span class="r6">    55 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    header </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> give_header(</span><span class="r13">&#x27;404&#x27;</span><span class="r9">, </span><span class="r13">&#x27;html&#x27;</span><span class="r9">)</span><span class="r11">                                                  </span> |
|<span class="r6">    56 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    err_mes </span><span class="r12">=</span><span class="r9"> </span><span class="r13">&#x27;&#x27;&#x27;</span><span class="r11">                                                                              </span> |
|<span class="r6">    57 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                &lt;html&gt;</span><span class="r11">                                                                         </span> |
|<span class="r6">    58 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                    &lt;head&gt;&lt;title&gt;404 PAGE NOT FOUND&lt;/title&gt;&lt;/head&gt;</span><span class="r11">                             </span> |
|<span class="r6">    59 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                    &lt;body&gt;&lt;h1&gt;404 PAGE NOT FOUND&lt;/h1&gt;&lt;/body&gt;</span><span class="r11">                                   </span> |
|<span class="r6">    60 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                &lt;/html&gt;</span><span class="r11">                                                                        </span> |
|<span class="r6">    61 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                        &#x27;&#x27;&#x27;</span><span class="r12">.</span><span class="r9">encode()</span><span class="r11">                                                           </span> |
|<span class="r6">    62 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> header </span><span class="r12">+</span><span class="r9"> err_mes</span><span class="r11">                                                                    </span> |
|<span class="r6">    63 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">error_501</span><span class="r9">():</span><span class="r11">                                                                         </span> |
|<span class="r6">    64 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    head </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> give_header(</span><span class="r13">&#x27;501&#x27;</span><span class="r9">, </span><span class="r13">&#x27;html&#x27;</span><span class="r9">)</span><span class="r11">                                                    </span> |
|<span class="r6">    65 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    err_m </span><span class="r12">=</span><span class="r9"> </span><span class="r13">&#x27;&#x27;&#x27;</span><span class="r11">                                                                                </span> |
|<span class="r6">    66 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                &lt;html&gt;</span><span class="r11">                                                                         </span> |
|<span class="r6">    67 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                      &lt;head&gt;&lt;title&gt;501 NOT IMPLEMENTED&lt;/title&gt;&lt;/head&gt;</span><span class="r11">                          </span> |
|<span class="r6">    68 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                      &lt;body&gt;&lt;h1&gt;501 NOT IMPLEMENTED&lt;/h1&gt;&lt;/body&gt;</span><span class="r11">                                </span> |
|<span class="r6">    69 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                &lt;/html&gt;</span><span class="r11">                                                                        </span> |
|<span class="r6">    70 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r13">                 &#x27;&#x27;&#x27;</span><span class="r12">.</span><span class="r9">encode()</span><span class="r11">                                                                  </span> |
|<span class="r6">    71 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> head </span><span class="r12">+</span><span class="r9"> err_m</span><span class="r11">                                                                        </span> |
|<span class="r6">    72 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    73 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">aleg_stare</span><span class="r9">(stare, client, request):</span><span class="r11">                                                  </span> |
|<span class="r6">    74 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    match stare:</span><span class="r11">                                                                               </span> |
|<span class="r6">    75 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        case </span><span class="r12">1</span><span class="r9">:</span><span class="r11">                                                                                </span> |
|<span class="r6">    76 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            response </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> server_response(request)</span><span class="r11">                                          </span> |
|<span class="r6">    77 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            client</span><span class="r12">.</span><span class="r9">sendall(response)</span><span class="r11">                                                           </span> |
|<span class="r6">    78 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        case </span><span class="r12">3</span><span class="r9">:</span><span class="r11">                                                                                </span> |
|<span class="r6">    79 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            ras </span><span class="r12">=</span><span class="r8">await</span><span class="r9"> MentinanceReDirect()</span><span class="r11">                                                    </span> |
|<span class="r6">    80 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            client</span><span class="r12">.</span><span class="r9">sendall(ras)</span><span class="r11">                                                                </span> |
|<span class="r6">    81 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            client</span><span class="r12">.</span><span class="r9">shutdown(socket</span><span class="r12">.</span><span class="r9">SHUT_WR)</span><span class="r11">                                                    </span> |
|<span class="r6">    82 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        case </span><span class="r12">2</span><span class="r9">:</span><span class="r11">                                                                                </span> |
|<span class="r6">    83 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">            client</span><span class="r12">.</span><span class="r9">close()</span><span class="r11">                                                                     </span> |
|<span class="r6">    84 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    85 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">conect_to_socket</span><span class="r9">(port):</span><span class="r11">                                                              </span> |
|<span class="r6">    86 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r9">    socket_server </span><span class="r12">=</span><span class="r9"> socket</span><span class="r12">.</span><span class="r9">socket(socket</span><span class="r12">.</span><span class="r9">AF_INET, socket</span><span class="r12">.</span><span class="r9">SOCK_STREAM)</span><span class="r11">                          </span> |
|<span class="r6">    87 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    socket_server</span><span class="r12">.</span><span class="r9">setsockopt(socket</span><span class="r12">.</span><span class="r9">SOL_SOCKET, socket</span><span class="r12">.</span><span class="r9">SO_REUSEADDR, </span><span class="r12">1</span><span class="r9">)</span><span class="r11">                        </span> |
|<span class="r6">    88 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    socket_server</span><span class="r12">.</span><span class="r9">bind((</span><span class="r13">&#x27;localhost&#x27;</span><span class="r9">, port))</span><span class="r11">                                                    </span> |
|<span class="r6">    89 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r9">    socket_server</span><span class="r12">.</span><span class="r9">listen()</span><span class="r11">                                                                     </span> |
|<span class="r6">    90 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> socket_server</span><span class="r11">                                                                       </span> |
|<span class="r6">    91 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    92 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">get_stare</span><span class="r9">():</span><span class="r11">                                                                         </span> |
|<span class="r6">    93 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    stare </span><span class="r12">=</span><span class="r9"> </span><span class="r17">int</span><span class="r9">(</span><span class="r17">input</span><span class="r9">(</span><span class="r13">&quot;Da stare intre 1-3: &quot;</span><span class="r9">))</span><span class="r11">                                                 </span> |
|<span class="r6">    94 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> stare</span><span class="r11">                                                                               </span> |
|<span class="r6">    95 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">    96 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">get_port</span><span class="r9">():</span><span class="r11">                                                                          </span> |
|<span class="r6">    97 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r9">    port </span><span class="r12">=</span><span class="r9"> </span><span class="r17">int</span><span class="r9">(</span><span class="r17">input</span><span class="r9">(</span><span class="r13">&quot;da un port intre 1024-65000&quot;</span><span class="r9">))</span><span class="r11">                                           </span> |
|<span class="r6">    98 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">return</span><span class="r9"> port</span><span class="r11">                                                                                </span> |
|<span class="r6">    99 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">   100 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">async</span><span class="r9"> </span><span class="r8">def</span><span class="r9"> </span><span class="r14">run</span><span class="r9">(port,stare):</span><span class="r11">                                                                     </span> |
|<span class="r6">   101 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    stare </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> get_stare()</span><span class="r11">                                                                  </span> |
|<span class="r6">   102 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    port </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> get_port()</span><span class="r11">                                                                    </span> |
|<span class="r6">   103 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    port </span><span class="r12">=</span><span class="r8">await</span><span class="r9"> check_port(port)</span><span class="r11">                                                               </span> |
|<span class="r6">   104 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    socket_server </span><span class="r12">=</span><span class="r9"> </span><span class="r8">await</span><span class="r9"> conect_to_socket(port)</span><span class="r11">                                               </span> |
|<span class="r6">   105 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">    </span><span class="r8">while</span><span class="r9"> </span><span class="r8">True</span><span class="r9">:</span><span class="r11">                                                                                </span> |
|<span class="r6">   106 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        client, adresa </span><span class="r12">=</span><span class="r9"> socket_server</span><span class="r12">.</span><span class="r9">accept()</span><span class="r11">                                                </span> |
|<span class="r6">   107 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">  29%  </span>|<span class="r9">        request </span><span class="r12">=</span><span class="r9"> client</span><span class="r12">.</span><span class="r9">recv(</span><span class="r12">4096</span><span class="r9">)</span><span class="r11">                                                            </span> |
|<span class="r6">   108 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">  21%  </span>|<span class="r9">        </span><span class="r17">print</span><span class="r9">(request</span><span class="r12">.</span><span class="r9">decode(</span><span class="r13">&#x27;utf-8&#x27;</span><span class="r9">))</span><span class="r11">                                                         </span> |
|<span class="r6">   109 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r9">        </span><span class="r17">print</span><span class="r9">()</span><span class="r11">                                                                                </span> |
|<span class="r6">   110 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r17">print</span><span class="r9">(adresa)</span><span class="r11">                                                                          </span> |
|<span class="r6">   111 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r9">        </span><span class="r8">await</span><span class="r9"> aleg_stare(stare,client,request)</span><span class="r11">                                                 </span> |
|<span class="r6">   112 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">   113 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r11">                                                                                               </span> |
|<span class="r6">   114 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r8">if</span><span class="r9"> </span><span class="r19">__name__</span><span class="r9"> </span><span class="r12">==</span><span class="r9"> </span><span class="r13">&#x27;__main__&#x27;</span><span class="r9">:</span><span class="r11">                                                                     </span> |
|<span class="r6">   115 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">  30%  </span>|<span class="r9">    asyncio</span><span class="r12">.</span><span class="r9">run(run(</span><span class="r12">4000</span><span class="r9">,</span><span class="r12">1</span><span class="r9">))</span><span class="r11">                                                                   </span> |
|<span class="r6">       </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|                                                                                                |
|-------+--------+-------+-------+------------------------------------------------------------------------------------------------|
|<span class="r6">       </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">       </span>|<span class="r20">function summary for server.py                                                                 </span> |
|<span class="r6">    85 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   7%  </span>|<span class="r9">Handle</span><span class="r12">.</span><span class="r9">conect_to_socket</span><span class="r11">                                                                        </span> |
|<span class="r6">    96 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">   3%  </span>|<span class="r9">Handle</span><span class="r12">.</span><span class="r9">get_port</span><span class="r11">                                                                                </span> |
|<span class="r6">   100 </span>|<span class="r7">        </span>|<span class="r7">       </span>|<span class="r7">  54%  </span>|<span class="r9">Handle</span><span class="r12">.</span><span class="r9">run</span><span class="r11">                                                                                     </span> |
+---------------------------------------------------------------------------------------------------------------------------------+
generated by the <a class="r21" href="https://github.com/plasma-umass/scalene">scalene</a> profiler                                                                                                   
</pre>
    </code>
</body>
</html>
